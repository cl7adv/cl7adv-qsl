<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>QSL CARIBE NE√ìN - 2026</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <style>
        :root {
            --caribe-cyan: #00f2ff;
            --caribe-pink: #ff007b;
            --caribe-orange: #ff8c00;
            --bg: #050a15;
            --glass: rgba(10, 20, 40, 0.85);
        }

        body { 
            margin: 0; background: var(--bg); color: white; 
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background-image: 
                linear-gradient(rgba(5, 10, 21, 0.8), rgba(5, 10, 21, 0.8)),
                url('https://images.unsplash.com/photo-1544945582-3b466d874eac?auto=format&fit=crop&w=1920&q=80'); /* Palmeras nocturnas */
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
        }

        /* --- ANIMACI√ìN NE√ìN --- */
        .neon-text {
            color: #fff;
            text-shadow: 0 0 10px var(--caribe-cyan), 0 0 20px var(--caribe-cyan), 0 0 40px var(--caribe-cyan);
            letter-spacing: 5px; text-transform: uppercase; font-weight: 900;
        }

        /* --- NAVBAR --- */
        .navbar {
            padding: 20px 40px; background: rgba(0,0,0,0.6); backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--caribe-cyan); display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
        }

        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; }

        /* --- TARJETAS CARIBE√ëAS --- */
        .tropical-card {
            background: var(--glass); border-radius: 40px; padding: 50px 30px;
            border: 1px solid rgba(0, 242, 255, 0.3);
            box-shadow: 0 25px 60px rgba(0,0,0,0.8);
            text-align: center; position: relative; overflow: hidden;
            margin-bottom: 50px;
        }

        /* Decoraci√≥n palmeras ne√≥n */
        .tropical-card::after {
            content: "üå¥"; position: absolute; bottom: -20px; right: -10px;
            font-size: 8rem; opacity: 0.1; transform: rotate(-15deg);
        }

        /* --- INPUTS ESTILO SCANNER --- */
        .scanner-input {
            width: 90%; max-width: 450px; padding: 25px; border-radius: 20px;
            background: rgba(0,0,0,0.7); border: 2px solid #1e293b; color: var(--caribe-cyan);
            font-size: 2.5rem; text-align: center; font-weight: 900; margin-bottom: 25px;
            transition: 0.4s; font-family: 'Courier New', monospace;
        }
        .scanner-input:focus { 
            border-color: var(--caribe-cyan); 
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.4); outline: none;
            transform: scale(1.02);
        }

        .btn-caribe {
            padding: 22px 50px; border-radius: 100px; border: none; font-weight: 900;
            cursor: pointer; text-transform: uppercase; font-size: 1.1rem;
            transition: 0.4s; letter-spacing: 2px;
        }
        .btn-cyan { background: var(--caribe-cyan); color: #000; box-shadow: 0 10px 30px rgba(0, 242, 255, 0.3); }
        .btn-pink { background: var(--caribe-pink); color: #fff; box-shadow: 0 10px 30px rgba(255, 0, 123, 0.3); }
        .btn-caribe:hover { transform: translateY(-5px) scale(1.05); filter: brightness(1.2); }

        /* --- RESULTADOS --- */
        #results-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 20px; margin-top: 40px; 
        }
        .qsl-preview { 
            width: 100%; border-radius: 20px; border: 2px solid var(--caribe-cyan); 
            transition: 0.4s; cursor: pointer; background: #000;
        }
        .qsl-preview:hover { transform: rotate(2deg) scale(1.1); box-shadow: 0 0 40px var(--caribe-cyan); }

        footer { text-align: center; padding: 50px; color: rgba(255,255,255,0.3); font-size: 0.8rem; letter-spacing: 5px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="neon-text" style="font-size: 1.5rem;">CARIBE QSL</div>
        <div id="utc-clock" style="color: var(--caribe-cyan); font-weight: 900; letter-spacing: 2px; font-family: monospace;">00:00:00 UTC</div>
    </nav>

    <div class="container">
        
        <div class="tropical-card">
            <h1 class="neon-text" style="font-size: 2.2rem; margin-bottom: 40px;">Buscador de Radio</h1>
            <input type="text" id="scan-id" class="scanner-input" placeholder="LLAMADA">
            <br>
            <button class="btn-caribe btn-cyan" onclick="startScan()">Escanear Nodo</button>
            <div id="results-grid"></div>
        </div>

        <div class="tropical-card" style="border-color: var(--caribe-pink);">
            <h2 style="color: var(--caribe-pink); text-transform: uppercase;">Central de Almac√©n</h2>
            <p style="color: #64748b; font-size: 0.8rem;">Solo administraci√≥n autorizada</p>
            
            <input type="text" id="up-name" class="scanner-input" placeholder="NOMBRE" style="font-size: 1.2rem; border-color: #334155; padding: 15px;">
            <br>
            <input type="file" id="up-file" style="margin-bottom: 25px; color: var(--caribe-pink);"><br>
            <button class="btn-caribe btn-pink" onclick="adminUpload()">Subir a Drive</button>
        </div>

    </div>

    <footer>CL7ADV ‚Ä¢ RED CARIBE ‚Ä¢ 2026</footer>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbwCs0GIz2_0jzlWbNXpoufBOUCPYOrkaUZCWGRolnUW4k8Nmuzs0TCRAKqOHhRUYF-i/exec";
        const PASSCODE = "Leila2026";

        // Reloj Din√°mico
        setInterval(() => {
            const d = new Date();
            document.getElementById('utc-clock').innerText = d.getUTCHours().toString().padStart(2,'0') + ":" + d.getUTCMinutes().toString().padStart(2,'0') + ":" + d.getUTCSeconds().toString().padStart(2,'0') + " UTC";
        }, 1000);

        // L√≥gica de B√∫squeda
        async function startScan() {
            const call = document.getElementById('scan-id').value.trim().toUpperCase();
            const grid = document.getElementById('results-grid');
            if(!call) return;
            
            grid.innerHTML = "<p style='color:var(--caribe-cyan)'>Sincronizando con el servidor...</p>";
            const exts = ['png', 'jpg', 'jpeg'];
            let found = false;

            for(let e of exts) {
                const url = `img/${call}.${e}`;
                const i = new Image();
                i.onload = () => {
                    grid.innerHTML = `<img src="${url}" class="qsl-preview" onclick="window.open(this.src)">`;
                    found = true;
                };
                i.src = url;
            }
            setTimeout(() => { if(!found) grid.innerHTML = "<p style='color:var(--caribe-pink)'>SIN REGISTROS EN LA BASE DE DATOS</p>"; }, 2000);
        }

        // L√≥gica de Subida con Contrase√±a
        async function adminUpload() {
            const name = document.getElementById('up-name').value.trim().toUpperCase();
            const fileIn = document.getElementById('up-file').files[0];

            if(!name || !fileIn) return alert("Error: Faltan datos del archivo.");

            // El prompt que pediste
            const key = prompt("üîí ACCESO RESTRINGIDO\nIntroduce la contrase√±a Maestra:");

            if(key === PASSCODE) {
                alert("‚ö° Llave aceptada. Subiendo imagen...");
                
                const reader = new FileReader();
                reader.readAsDataURL(fileIn);
                reader.onload = async function() {
                    const data = {
                        base64: reader.result.split(',')[1],
                        type: fileIn.type,
                        name: name + ".png"
                    };
                    try {
                        const response = await fetch(API_URL, { method: "POST", body: JSON.stringify(data) });
                        const res = await response.json();
                        if(res.result === "success") {
                            alert("‚úÖ ¬°√âXITO! El archivo ya est√° seguro en Google Drive.");
                        }
                    } catch(err) {
                        alert("‚ùå Fallo de conexi√≥n con el servidor.");
                    }
                };
            } else {
                alert("üö´ ERROR: Llave no autorizada.");
            }
        }
    </script>
</body>
</html>
